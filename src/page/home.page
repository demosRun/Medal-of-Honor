<template lang="pug">
.one
  //- 左上角logo
  img.logo(src="@|logo.png|")
  //- 标题上的光
  img.light-1(src="@|light.png|")
  img.light-2(src="@|light.png|")
  img.soulless.so-18.item-18(width="241", height="60", src="@|one-18.png|")
  //- 勋章
  img.soulless.so-6.item-6(width="141", height="35", src="@|one-6.png|", o-hover="grow", :tap="changeItem('ghgxz', 0)")
  img.soulless.so-16.item-16(width="115", height="35", src="@|one-16.png|", o-hover="grow", :tap="changeItem('yyxz', 1)")
  img.soulless.so-17.item-17(width="298", height="60", src="@|one-17.png|")
  //- 荣誉
  img.soulless.so-15.item-15(width="141", height="35", src="@|one-15.png|", o-hover="grow", :tap="changeItem('rmjyj', 2)")
  img.soulless.so-14.item-14(width="141", height="35", src="@|one-14.png|", o-hover="grow", :tap="changeItem('rmysj', 3)")
  img.soulless.so-13.item-13(width="115", height="35", src="@|one-13.png|", o-hover="grow", :tap="changeItem('rmkm', 4)")
  img.soulless.so-12.item-12(width="114", height="35", src="@|one-12.png|", o-hover="grow", :tap="changeItem('rmkm', 5)")
  img.soulless.so-11.item-11(width="141", height="35", src="@|one-11.png|", o-hover="grow", :tap="changeItem('rmkxj', 6)")
  img.soulless.so-10.item-10(width="247", height="35", src="@|one-10.png|", o-hover="grow", :tap="changeItem('wjgzjcgxz', 7)")
  img.soulless.so-9.item-9(width="246", height="35", src="@|one-9.png|", o-hover="grow", :tap="changeItem('mztjjcgxz', 8)")
  img.soulless.so-8.item-8(width="287", height="36", src="@|one-8.png|", o-hover="grow", :tap="changeItem('yglzjcgxz', 9)")
  img.soulless.so-7.item-7(width="247", height="35", src="@|one-7.png|", o-hover="grow", :tap="changeItem('wwbhjcgxz', 10)")
  //- 中间显示区域
  img.soulless.so-19.item-19(width="1689", height="1163", src="@|one-19.png|")
  //- 左右箭头
  img.soulless.so-1.button.item-1(width="39", height="39", src="@|one-1.png|", :tap="prev", o-hover="grow")
  img.soulless.so-2.button.item-2(width="39", height="39", src="@|one-2.png|", :tap="next", o-hover="grow")
  //- 轮播图
  ul.content
  .edit
    .ghgxz.gjxz
      a(href="http://www.people.com.cn/" target="_blank")
        img(src="@|people-1.jpg|", width="340", height="610")
      img(src="@|people-2.jpg|", width="340", height="610")
      img(src="@|people-3.jpg|", width="340", height="610")
      img(src="@|people-1.jpg|", width="340", height="610")
      img(src="@|people-2.jpg|", width="340", height="610")
      img(src="@|people-3.jpg|", width="340", height="610")
    .yyxz.gjxz
      img(src="@|people-3.jpg|", width="340", height="610")
      a(href="http://www.people.com.cn/" target="_blank")
        img(src="@|people-2.jpg|", width="340", height="610")
      img(src="@|people-1.jpg|", width="340", height="610")
      img(src="@|people-3.jpg|", width="340", height="610")
      img(src="@|people-2.jpg|", width="340", height="610")
    .rmjyj.gjrych
      a(href="http://www.people.com.cn/" target="_blank")
        img(src="@|people-1.jpg|", width="340", height="610")
    .rmysj.gjrych
      img(src="@|people-3.jpg|", width="340", height="610")
      a(href="http://www.people.com.cn/" target="_blank")
        img(src="@|people-2.jpg|", width="340", height="610")
    .rmkm.gjrych
      img(src="@|people-3.jpg|", width="340", height="610")
      img(src="@|people-2.jpg|", width="340", height="610")
      a(href="http://www.people.com.cn/" target="_blank")
        img(src="@|people-1.jpg|", width="340", height="610")
    .rmyx.gjrych
      img(src="@|people-1.jpg|", width="340", height="610")
    .rmkxj.gjrych
      img(src="@|people-3.jpg|", width="340", height="610")
      img(src="@|people-2.jpg|", width="340", height="610")
      a(href="http://www.people.com.cn/" target="_blank")
        img(src="@|people-1.jpg|", width="340", height="610")
      img(src="@|people-3.jpg|", width="340", height="610")
    .wjgzjcgxz.gjrych
      img(src="@|people-3.jpg|", width="340", height="610")
      img(src="@|people-2.jpg|", width="340", height="610")
    .mztjjcgxz.gjrych
      img(src="@|people-3.jpg|", width="340", height="610")
      img(src="@|people-2.jpg|", width="340", height="610")
      img(src="@|people-1.jpg|", width="340", height="610")
      img(src="@|people-3.jpg|", width="340", height="610")
      img(src="@|people-2.jpg|", width="340", height="610")
      img(src="@|people-1.jpg|", width="340", height="610")
    .yglzjcgxz.gjrych
      img(src="@|people-3.jpg|", width="340", height="610")
      img(src="@|people-2.jpg|", width="340", height="610")
      img(src="@|people-1.jpg|", width="340", height="610")
      img(src="@|people-3.jpg|", width="340", height="610")
      img(src="@|people-2.jpg|", width="340", height="610")
      img(src="@|people-1.jpg|", width="340", height="610")
    .wwbhjcgxz.gjrych
      img(src="@|people-3.jpg|", width="340", height="610")
      img(src="@|people-2.jpg|", width="340", height="610")
      img(src="@|people-1.jpg|", width="340", height="610")
      img(src="@|people-3.jpg|", width="340", height="610")
  temple(name="copyright", src="https://owo.ink/public/080195cd2dcfc878e55f9b7f9fa1c9b7.page")
</template>

<script>
  module.exports = {
    data: {
      swiper: null,
      activeIndex: 0
    },
    created: function () {
      this.changeItem('ghgxz', 0)
      setTimeout(() => {
        this.initContent()
      }, 0)
    },
    prev: function () {
      this.data.swiper.clickPrev()
    },
    next: function () {
      this.data.swiper.clickNext()
    },
    initContent: function () {
      this.data.swiper = swiperIt.init(owo.query('.content')[0], {
        autoplay: 3000,
        showSlider: 3,
        width: 32,
        step: 1,
        slideChange: function (ind) {
        },
        start: function (ind) {
        }
      })
    },
    changeItem: function (value, ind) {
      this.data.activeIndex = ind
      const content = owo.query('.content')[0]
      content.style.display = 'none'
      if (this.data.swiper) this.data.swiper.destroy()
      const imgList = owo.query('.' + value + '')[0].children
      let newHtml = ''
      // 判断卡片数量决定是否启用轮播
      if (imgList.length <= 3) {
        // 隐藏左右按钮
        this.$el.classList.add('no-button')
        owo.query('.so-19')[0].src = '@|one-19-2.png|'
        if (imgList.length === 1) {
          newHtml += `<li style="left: 0;right: 0;">${imgList[0].outerHTML}</li>`
        } else if (imgList.length === 2) {
          newHtml += `<li style="left: 10%;">${imgList[0].outerHTML}</li><li style="left: 60%;">${imgList[1].outerHTML}</li>`
        } else if (imgList.length === 3) {
          newHtml += `<li style="left: 0%;">${imgList[0].outerHTML}</li><li style="left: 34%;">${imgList[1].outerHTML}</li><li style="left: 68%;">${imgList[2].outerHTML}</li>`
        }
      } else {
        owo.query('.so-19')[0].src = '@|one-19.png|'
        this.$el.classList.remove('no-button')
        for (let ind = 0; ind < imgList.length; ind++) {
          const item = imgList[ind]
          // console.log(item)
          newHtml += `<li>${item.outerHTML}</li>`
        }
        setTimeout(() => {
          this.initContent()
        }, 100)
      }
      owo.query('.content')[0].innerHTML = newHtml
      setTimeout(() => {
        content.style.display = 'block'
      }, 500);
    }
  }
</script>


<style lang="less">
.so-1 {
  position: absolute;
  left: 568px;
  top: 621px;
  z-index: 999;
}
.so-2 {
  position: absolute;
  left: 1753px;
  top: 620px;
  z-index: 999;
}
.so-18 {
  position: absolute;
  left: 246px;
  top: 343px;
  z-index: 3;
}
.so-6 {
  position: absolute;
  left: 296px;
  top: 408px;
  z-index: 15;
}
.so-16 {
  position: absolute;
  left: 309px;
  top: 450px;
  z-index: 5;
}
.so-17 {
  position: absolute;
  left: 214px;
  top: 494px;
  z-index: 4;
}
.so-15 {
  position: absolute;
  left: 295px;
  top: 566px;
  z-index: 6;
}
.so-14 {
  position: absolute;
  left: 294px;
  top: 609px;
  z-index: 7;
}
.so-13 {
  position: absolute;
  left: 307px;
  top: 651px;
  z-index: 8;
}
.so-12 {
  position: absolute;
  left: 307px;
  top: 695px;
  z-index: 9;
}
.so-11 {
  position: absolute;
  left: 292px;
  top: 739px;
  z-index: 10;
}
.so-10 {
  position: absolute;
  left: 244px;
  top: 784px;
  z-index: 11;
}
.so-9 {
  position: absolute;
  left: 245px;
  top: 828px;
  z-index: 12;
}
.so-8 {
  position: absolute;
  left: 220px;
  top: 873px;
  z-index: 13;
}
.so-7 {
  position: absolute;
  left: 240px;
  top: 917px;
  z-index: 14;
}
.so-19 {
  position: absolute;
  left: 110px;
  top: 0px;
  z-index: 2;
}
.content {
  position: absolute;
  width: 1098px;
  height: 630px;
  z-index: 23;
  left: 633px;
  top: 323px;
  overflow: hidden;
  li {
    width: 340px;
    height: 610px;
    position: absolute;
    background-size: 100% 100%;
    cursor: pointer;
    margin: auto;
    top: 0;
    bottom: 0;
    transition: all 0.6s linear;
    border-radius: 10px;
    overflow: hidden;
    z-index: 2;
    img {
      width: 100%;
      height: 100%;
    }
    a {
      display: block;
      width: 100%;
      height: 100%;
    }
  }
  .show {
    opacity: 1;
    z-index: 2;
    transform: translateZ(10px)
  }
  .hide {
    opacity: 0;
    z-index: 0;
  }
}
.owo-hover-grow {
  cursor: pointer;
}
.edit {
  display: none;
}
// .next {
//   left: 102% !important;
// }
.logo {
  position: absolute;
  left: 110px;
  top: 150px;
}
.light-1 {
  position: absolute;
  left: 363px;
  top: 135px;
  animation: fade 2s infinite;
}
.light-2 {
  position: absolute;
  left: 957px;
  top: 139px;
  animation: fade 2s infinite;
}
@keyframes fade {
  from {
    opacity: 1.0;
  }
  50% {
    opacity: 0.4;
  }
  to {
    opacity: 1.0;
  }
}
</style>